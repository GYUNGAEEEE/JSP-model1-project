## Servlet
### 자바 서블릿(Java Servlet)
- 자바를 사용하여 웹페이지를 동적으로 생성하는 서버측 프로그램 혹은 그 사양
- 자바 서블릿은 웹 서버의 성능을 향상하기 위해 사용되는 자바 클래스의 일종
- JSP는 HTML 문서 안에 Java 코드를 포함
- 서블릿은 자바 코드 안에 HTML을 포함
- 자바 서블릿은 자바 EE 사양의 일부분
- 쇼핑몰이나 온라인 뱅킹 등의 다양한 웹 시스템을 구현

> 하나의 JSP 파일에는 HTML, CSS, JS, JSP, Java가 포함된다.
> HTML, CSS, JS는 클라이언트 측에서 실행되며, 브라우저에서 해석 및 처리된다. 반면에 JSP와 Java 코드는 서버 측에서 실행되어 서버에서 처리된다.
> 1. 클라이언트(웹 브라우저)에서 서버에 웹 페이지를 요청한다.
> 2. 서버는 해당 요청에 대한 JSP 파일을 찾아서 실행한다.
> 3. JSP 파일에는 HTML, CSS, JS로 구성된 클라이언트 측 코드뿐만 아니라 Java 코드도 포함되어 있다.
> 4. 서버는 JSP 파일의 Java 코드를 해석하고 실행하여 동적으로 생성된 내용을 포함한 HTML을 생성한다.
> 5. 서버는 생성된 HTML을 클라이언트에게 응답으로 보낸다.
> 6. 클라이언트 브라우저는 받은 HTML, CSS, JS 등을 해석하고 렌더링하여 사용자에게 보여준다.
> 7. 사용자와 상호 작용이 발생하면, 클라이언트는 서버에 추가적인 요청을 보내고 이러한 주고받음이 계속된다.

### 비슷한 기술
- 펄 등을 이용한 CGI, PHP를 아파치 웹 서버 프로세스에서 동작하게 하는 mod_php
- 마이크로소프트사의 IIS에서 동작하는 ASP 등
- CGI는 요청이 있을 때마다 새로운 프로세스가 생성되어 응답
- 자바 서블릿은 외부 요청마다 프로세스보다 가벼운 스레드로써 응답
- 서블릿은 자바로 구현되므로 다양한 플랫폼에서 동작한다.
***
## Servlet - JSP Lifecycle
![image](https://github.com/GYUNGAEEEE/WebProgramming/assets/158580466/7a84d390-e449-4c92-8975-4fa3013dda8c)

클라이언트 측에서 JSP 파일을 요청하면 톰캣이 요청을 받아 JSP 파일을 Java 코드(서블릿 클래스)로 변경한다.
변경된 Java 코드는 JDK에 포함된 컴파일러를 통해 Class 파일로 컴파일 되고, 컴파일된 서블릿 클래스는 서블릿 컨테이너에서 로딩되고 서블릿 객체가 생성된다.
그것이 가지고 있는 기능을 이용해 처리(서비스)해서 클라이언트에게 응답을 주는 형태다.

(a) 최초로 서버에 JSP 파일에 대한 요청했을 때

(b) 앞으로 동일한 JSP 파일에 대한 요청이 있을 때에는 바로 인스턴스를 실행하고 응답을 준다.
***
### JSP를 이용한 웹 애플리케이션의 구현(JSP Lifecycle)
![KakaoTalk_20240312_233733029](https://github.com/GYUNGAEEEE/WebProgramming/assets/158580466/5e21361c-b205-4872-afa9-cb292b801e37)

클라이언트(브라우저)는 서버에게 웹 페이지를 요청(request)한다. 이때, 특정 JSP 파일을 요청할 수 있다.
서버는 클라이언트의 요청에 따라 적절한 JSP 파일을 찾아서 실행한다. JSP 파일은 서버에서 Servlet으로 변환되어 실행된다.
Servlet은 객체를 생성하고, 필요한 서비스 및 액션을 처리한다. 

단순하게 JSP 파일에서 처리 및 응답을 줄 수도 있고, 별도의 클래스를 만들어 서비스/액션을 처리하는 코드를 포함할 수도 있다.
필요에 따라 DB 연동이 필요한 경우, DAO(Data Access Object)를 사용하여 데이터베이스와의 상호 작용해 DB 관련 처리를 통해 결과를 얻을 수도 있다.

JSP 파일은 클라이언트에게 HTML을 생성하여 응답을 한다. 그리고, 결과물이나 처리된 내용(로직 처리 결과)을 클라이언트에게 전달한다.
상황에 따라 forward 또는 redirect를 통해 다른 JSP 파일이나 서비스로 제어를 넘길 수 있다.
Forwarding을 통해 request, session, application 객체에 데이터를 저장하고 유지할 수 있으며, 결과 데이터를 attribute로 설정하여 다른 JSP 파일로 전달할 수 있다.
또는, 처리 후 응답할 내용이 따로 없으면, redirect를 통해 브라우저에게 다른 리소스를 요청하도록 응답할 수 있다. 이를 통해 다른 처리 단계로 제어를 넘길 수 있다.

### Servlet을 이용한 웹 애플리케이션의 구현(Servlet Lifecycle)
![KakaoTalk_20240312_233811763](https://github.com/GYUNGAEEEE/WebProgramming/assets/158580466/3aaf2d9f-8bc4-4949-ac64-30c802eebfdc)

특정 URL 또는 경로에 따라 톰캣이 어떤 Servlet을 동작시켜야 할지를 구분한다.
예를 들어, 요청이 'a'이면 Servlet1, 요청이 'b'이면 Servlet2와 같이 특정 명령을 요청한다.
-> 'C'

Servlet은 개발자가 작성한 Java 클래스이며, HttpServlet을 상속하고 있어서 클라이언트의 request를 처리할 수 있다.
Servlet이 동작할 때 필요한 로직이 있으면 Service/Action, DAO, DB 등과 함께 활용하여 처리된다.
-> 'M'

Servlet은 처리된 결과를 보여줄 수 있도록 forwarding을 활용한다. forwarding을 통해 객체에 데이터를 저장하여 다른 JSP 파일로 전달할 수 있다.
이때, JSP는 브라우저에 무엇인가를 보여주는 용도로 사용된다. Servlet에서 처리된 로직의 결과를 forwarding을 통해 JSP로 전달하고, JSP는 이 결과를 브라우저에 응답할 수 있는 형태로 생성한다는 것이다.
-> 'V'

JSP 파일을 이용하여 웹 애플리케이션을 구현하면 JSP 파일은 HTML 코드 기반에 다양한 코드가 섞여 있어서 수정과 유지보수가 어려울 수 있다.
그러나, Servlet을 이용하여 구현하면 비즈니스 로직과 브라우저에 표시되는 부분을 분리할 수 있어 유지보수가 쉬워진다.
Servlet을 통해 비즈니스 로직을 처리하고, JSP를 통해 사용자에게 보여지는 부분을 담당함으로써, 계층을 나누어 작업하면 유지보수가 용이해진다.
JSP 파일이나 Servlet 각각에 문제가 발생했을 때 해당 계층만 수정하면 되므로 개발자들이 작업을 분업하거나 수정을 더 편리하게 할 수 있다.
***
## MVC 패턴
모델-뷰-컨트롤러(model-view-controller, MVC): 소프트웨어 공학에서 사용되는 소프트웨어 디자인 패턴

이 패턴을 성공적으로 사용(적용) 시 사용자 인터페이스로부터 비즈니스 로직을 분리할 수 있다. 즉, 결합도는 낮추고, 응집도는 올릴 수 있다.
애플리케이션의 시각적 요소나 그 이면에서 실행되는 비즈니스 로직을 서로 영향 없이 쉽게 고칠 수 있는 애플리케이션을 만들 수 있다.
> - 결합도(Coupling)
>
> 모듈 간 상호 의존성의 정도를 나타낸다. 두 모듈 간의 결합도가 낮을수록, 하나의 모듈을 변경할 때 다른 모듈에 미치는 영향이 적다.
> 느슨한 결합도(Loose Coupling)는 시스템의 유연성을 높이고 재사용성을 증가시킨다. 낮은 결합도를 지향하여 각 모듈이 독립적으로 변경 가능하도록 하는 것이 바람직하다.
>
> - 응집도(Cohesion)
>
> 모듈 내부의 구성 요소들이 서로 관련이 있는 정도를 나타낸다. 높은 응집도(High Cohesion)는 모듈 내부의 각 요소들이 서로 밀접하게 관련되어 있음을 의미한다.
> 응집도가 높을수록 모듈의 기능이 명확하고 모듈의 역할이 단순해진다. 모듈 내의 구성 요소들이 밀접하게 관련되어 있으면 유지보수 및 이해가 쉬워지며, 모듈이 하나의 목적을 수행하기 쉬워진다.

모델: 애플리케이션의 정보(데이터)를 나타냄   
뷰: 텍스트, 체크박스 항목 등과 같은 사용자 인터페이스 요소를 나타냄   
컨트롤러: 데이터와 비즈니스 로직 사이의 상호동작을 관리   
***
### MVC패턴 적용 이전 구현 방식
- JSP 파일로 처리하는 방식

jsp요청 - 처리 - 응답   
jsp요청 - 처리 - redirect응답   
jsp요청 - 처리 - forward(다른jsp) - 처리 - 응답

- 서블릿으로 처리하는 방식

URL요청 - 서블릿에서 처리 - 직접 응답   
URL요청 - 서블릿에서 처리 - redirect 응답   
URL요청 - 서블릿에서 처리 - forward(jsp선택) - JSP처리(값 세팅) - 응답 => MVC

> 참고자료: https://www.youtube.com/watch?v=CIRZI3JL4GU
